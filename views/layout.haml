!!!
%html.no-js{:lang => "en"}
  %head
    %meta{:charset => "UTF-8"}/
    %meta{:content => "IE=edge,chrome=1", "http-equiv" => "X-UA-Compatible"}
      %meta{:content => "width=device-width, initial-scale=1.0", :name => "viewport"}
        %title Commissions Home
        %meta{:content => "Blueprint: Slide and Push Menus", :name => "description"}/
        %meta{:content => "sliding menu, pushing menu, navigation, responsive, menu, css, jquery", :name => "keywords"}/
        %meta{:content => "Codrops", :name => "author"}/
        %link{:href => "../favicon.ico", :rel => "shortcut icon"}
        %link{:href => "css/default.css", :rel => "stylesheet", :type => "text/css"}/
        %link{:href => "css/component.css", :rel => "stylesheet", :type => "text/css"}/
        %link{:href => "css/styles.css", :rel => "stylesheet", :type => "text/css"}/
        %script{:src => "js/modernizr.custom.js"}
        %script{:src => "//www.google.com/jsapi"}
        %script{:src => "js/chartkick.js"}
    / Load the AJAX API
  %script{:src => "https://www.google.com/jsapi", :type => "text/javascript"}
  :javascript
    // Load the Visualization API and the piechart package.
    google.load('visualization', '1.0', {'packages':['corechart']});
    console.log('#{@title}')
    // Set a callback to run when the Google Visualization API is loaded.
    google.setOnLoadCallback(drawChart);

    // Callback that creates and populates a data table,
    // instantiates the pie chart, passes in the data and
    // draws it.
    function drawChart() {
    
      // Create JSON object from txt file
      var json_table = #{@curve.to_json}
      
      var t_data_json = new google.visualization.DataTable(json_table);
      t_data_json.addColumn('number','Achievement');
      t_data_json.addColumn('number','Payout');      

      var data = new google.visualization.arrayToDataTable([
          ['Achievement', 'Payout'],
          [0,  0],
          [10,  20],
          [20,  40],
          [50,  50,],
          [60, 80],
          [100,100],
          [110,120],
          [200,120]
        ]);

      // Set chart options
      var options = {'title':'Payout Curve', colors: ['#0d77b6'], height: 400, width: 600, titleTextStyle: {color:'#0d77b6'}};

      // Instantiate and draw our chart, passing in some options.
      var chart = new google.visualization.AreaChart(document.getElementById('chart_div'));
      chart.draw(data, options);
    }
  %body.cbp-spmenu-push
    %nav#cbp-spmenu-s1.cbp-spmenu.cbp-spmenu-vertical.cbp-spmenu-left
      %h3 Menu
      %a{:href => "/"} Payout Calculator
      %a{:href => "/tiles"} Tiles
      %a{:href => "/contact"} Contacts
      %a{:href => "#"} Compensation Plan
      %a{:href => "#"} Deal Dashboard
      %a{:href => "#"} Payment Dashboard
    .container
      
      %header.clearfix
        %span Commissions Home
        %h1 Calculate your payment
      .main
        %section
          / Class "cbp-spmenu-open" gets applied to menu
          %button#showLeft Menu
        
        #content
          =yield
    / Classie - class helper functions by @desandro https://github.com/desandro/classie
    %script{:src => "js/classie.js"}
    :javascript
      var menuLeft = document.getElementById( 'cbp-spmenu-s1' ),
      	menuRight = document.getElementById( 'cbp-spmenu-s2' ),
      	menuTop = document.getElementById( 'cbp-spmenu-s3' ),
      	menuBottom = document.getElementById( 'cbp-spmenu-s4' ),
      	showLeft = document.getElementById( 'showLeft' ),
      	showRight = document.getElementById( 'showRight' ),
      	showTop = document.getElementById( 'showTop' ),
      	showBottom = document.getElementById( 'showBottom' ),
      	showLeftPush = document.getElementById( 'showLeftPush' ),
      	showRightPush = document.getElementById( 'showRightPush' ),
      	body = document.body;

      showLeft.onclick = function() {
      	classie.toggle( this, 'active' );
      	classie.toggle( menuLeft, 'cbp-spmenu-open' );
      	disableOther( 'showLeft' );
      };
      showRight.onclick = function() {
      	classie.toggle( this, 'active' );
      	classie.toggle( menuRight, 'cbp-spmenu-open' );
      	disableOther( 'showRight' );
      };
      showTop.onclick = function() {
      	classie.toggle( this, 'active' );
      	classie.toggle( menuTop, 'cbp-spmenu-open' );
      	disableOther( 'showTop' );
      };
      showBottom.onclick = function() {
      	classie.toggle( this, 'active' );
      	classie.toggle( menuBottom, 'cbp-spmenu-open' );
      	disableOther( 'showBottom' );
      };
      showLeftPush.onclick = function() {
      	classie.toggle( this, 'active' );
      	classie.toggle( body, 'cbp-spmenu-push-toright' );
      	classie.toggle( menuLeft, 'cbp-spmenu-open' );
      	disableOther( 'showLeftPush' );
      };
      showRightPush.onclick = function() {
      	classie.toggle( this, 'active' );
      	classie.toggle( body, 'cbp-spmenu-push-toleft' );
      	classie.toggle( menuRight, 'cbp-spmenu-open' );
      	disableOther( 'showRightPush' );
      };

      function disableOther( button ) {
      	if( button !== 'showLeft' ) {
      		classie.toggle( showLeft, 'disabled' );
      	}
      	if( button !== 'showRight' ) {
      		classie.toggle( showRight, 'disabled' );
      	}
      	if( button !== 'showTop' ) {
      		classie.toggle( showTop, 'disabled' );
      	}
      	if( button !== 'showBottom' ) {
      		classie.toggle( showBottom, 'disabled' );
      	}
      	if( button !== 'showLeftPush' ) {
      		classie.toggle( showLeftPush, 'disabled' );
      	}
      	if( button !== 'showRightPush' ) {
      		classie.toggle( showRightPush, 'disabled' );
      	}
      }